# ç®—æ³•ä½“ç³»æ¼”è¿›å¯¹æ¯”åˆ†æ

**ä»ä¼ ç»Ÿå¯å‘å¼åˆ°ç°ä»£å¼ºåŒ–å­¦ä¹ çš„æŠ€æœ¯è·ƒè¿**

---

## æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†å¯¹æ¯”äº†è‡ªé€‚åº”å­¦ä¹ ç³»ç»Ÿçš„**ä¸¤ä»£ç®—æ³•ä½“ç³»**ï¼š
- **ä¼ ç»Ÿç‰ˆæœ¬**ï¼šåŸºäºå¯å‘å¼è§„åˆ™çš„è‡ªé€‚åº”ç³»ç»Ÿï¼ˆå‚è€ƒç³»ç»Ÿï¼‰
- **å½“å‰ç‰ˆæœ¬**ï¼šåŸºäºå¼ºåŒ–å­¦ä¹ ä¸è®¤çŸ¥ç§‘å­¦çš„æ™ºèƒ½ç³»ç»Ÿï¼ˆæœ¬é¡¹ç›®å®ç°ï¼‰

é€šè¿‡ç³»ç»Ÿæ€§å¯¹æ¯”ï¼Œå±•ç¤ºæŠ€æœ¯æ¼”è¿›è·¯å¾„ã€æ”¹è¿›åŠ¨æœºå’Œæ•ˆæœæå‡ã€‚

---

## ç›®å½•

1. [æ€»ä½“å¯¹æ¯”æ¦‚è§ˆ](#1-æ€»ä½“å¯¹æ¯”æ¦‚è§ˆ)
2. [é¢˜ç›®æ‰“åˆ†ç³»ç»Ÿæ¼”è¿›](#2-é¢˜ç›®æ‰“åˆ†ç³»ç»Ÿæ¼”è¿›)
3. [é€‰æ‹©ç­–ç•¥æ¼”è¿›](#3-é€‰æ‹©ç­–ç•¥æ¼”è¿›)
4. [å¤ä¹ è°ƒåº¦æ¼”è¿›](#4-å¤ä¹ è°ƒåº¦æ¼”è¿›)
5. [èƒ½åŠ›è¿½è¸ªæ¼”è¿›](#5-èƒ½åŠ›è¿½è¸ªæ¼”è¿›)
6. [ç›¸ä¼¼åº¦æ§åˆ¶å¯¹æ¯”](#6-ç›¸ä¼¼åº¦æ§åˆ¶å¯¹æ¯”)
7. [æ€§èƒ½ä¸æ•ˆæœå¯¹æ¯”](#7-æ€§èƒ½ä¸æ•ˆæœå¯¹æ¯”)
8. [æŠ€æœ¯å€ºåŠ¡ä¸æƒè¡¡](#8-æŠ€æœ¯å€ºåŠ¡ä¸æƒè¡¡)
9. [æ¼”è¿›è·¯çº¿å›¾](#9-æ¼”è¿›è·¯çº¿å›¾)

---

## 1. æ€»ä½“å¯¹æ¯”æ¦‚è§ˆ

### 1.1 æ ¸å¿ƒç®—æ³•å¯¹æ¯”è¡¨

| æ¨¡å— | ä¼ ç»Ÿç‰ˆæœ¬ï¼ˆå‚è€ƒï¼‰ | å½“å‰ç‰ˆæœ¬ï¼ˆå®é™…ä»£ç ï¼‰ | å·®å¼‚ç­‰çº§ | ä»£ç ä½ç½® |
|------|-----------------|---------------------|---------|---------|
| **é¢˜ç›®æ‰“åˆ†** | çº¿æ€§åŠ æƒæ‰“åˆ† | Q-Learningå¼ºåŒ–å­¦ä¹  | â­â­â­â­â­ å®Œå…¨ä¸åŒ | `scorer.py:14-155` |
| **é€‰æ‹©ç­–ç•¥** | Softmaxæ¸©åº¦é‡‡æ · | UCBç½®ä¿¡ä¸Šç•Œ | â­â­â­â­â­ å®Œå…¨ä¸åŒ | `selector.py:14-102` |
| **å¤ä¹ è°ƒåº¦** | Leitnerå›ºå®šåˆ†æ¡¶ | SM-2åŠ¨æ€é—´éš” | â­â­â­â­ æœ¬è´¨å‡çº§ | `scheduler.py:12-84` |
| **èƒ½åŠ›è¿½è¸ª** | å›ºå®šæ­¥é•¿Â±0.15 | è´å¶æ–¯åéªŒæ›´æ–° | â­â­â­â­â­ å®Œå…¨ä¸åŒ | `ability.py:11-101` |
| **ç›¸ä¼¼åº¦æ§åˆ¶** | Qdrantå‘é‡æ£€ç´¢ | Qdrantå‘é‡æ£€ç´¢ | â­ åŸºæœ¬ç›¸åŒ | `app.py:800-850` |

### 1.2 æŠ€æœ¯èŒƒå¼å¯¹æ¯”

| ç»´åº¦ | ä¼ ç»Ÿç‰ˆæœ¬ | å½“å‰ç‰ˆæœ¬ |
|------|---------|---------|
| **è®¾è®¡å“²å­¦** | åŸºäºè§„åˆ™çš„å¯å‘å¼ | åŸºäºæ•°æ®çš„æœºå™¨å­¦ä¹  |
| **ä¼˜åŒ–ç›®æ ‡** | å•æ­¥æœ€ä¼˜ | é•¿æœŸç´¯ç§¯å›æŠ¥æœ€å¤§åŒ– |
| **å‚æ•°è°ƒä¼˜** | äººå·¥è¯•é”™ | è‡ªåŠ¨å­¦ä¹  |
| **ç†è®ºåŸºç¡€** | ç»éªŒè§„åˆ™ | å¼ºåŒ–å­¦ä¹ ã€è®¤çŸ¥ç§‘å­¦ã€è´å¶æ–¯ç»Ÿè®¡ |
| **å¤æ‚åº¦** | ä½ï¼ˆæ˜“ç†è§£ï¼‰ | ä¸­ï¼ˆéœ€è¦MLèƒŒæ™¯ï¼‰ |
| **å¯è§£é‡Šæ€§** | é«˜ï¼ˆç›´è§‚ï¼‰ | ä¸­ï¼ˆéœ€è¦ç†è§£Qå€¼ã€EFç­‰æ¦‚å¿µï¼‰ |
| **æ€§èƒ½ä¸Šé™** | æœ‰é™ | æ›´é«˜ï¼ˆç†è®ºæœ€ä¼˜ï¼‰ |

### 1.3 ä»£ç æ ‡æ³¨è¯æ®

å½“å‰ä»£ç ä¸­æ˜ç¡®æ ‡æ³¨äº†"æ›¿ä»£"å…³ç³»ï¼š

```python
# adaptive/scorer.py, line 1-2
"""Q-Learningæ‰“åˆ†ç³»ç»Ÿã€‚
æ›¿ä»£çº¿æ€§æ‰“åˆ†ï¼Œä½¿ç”¨å¼ºåŒ–å­¦ä¹ çš„Qå€¼ä¼°è®¡ã€‚"""

# adaptive/selector.py, line 3
"""æ›¿ä»£Softmaxé‡‡æ ·ï¼Œä½¿ç”¨UCBï¼ˆç½®ä¿¡ä¸Šç•Œï¼‰ç­–ç•¥ã€‚"""

# adaptive/scheduler.py, line 3
"""æ›¿ä»£Leitneråˆ†æ¡¶ç³»ç»Ÿï¼Œä½¿ç”¨è¿ç»­çš„æ˜“åº¦å› å­(EF)å’Œé—´éš”è®¡ç®—ã€‚"""

# adaptive/ability.py, line 3
"""æ›¿ä»£å›ºå®šæ­¥é•¿ï¼ˆÂ±0.15ï¼‰ï¼Œä½¿ç”¨è´å¶æ–¯åéªŒæ›´æ–°ã€‚"""
```

---

## 2. é¢˜ç›®æ‰“åˆ†ç³»ç»Ÿæ¼”è¿›

### 2.1 ä¼ ç»Ÿç‰ˆæœ¬ï¼šçº¿æ€§åŠ æƒæ‰“åˆ†

#### ç®—æ³•æè¿°

```python
# ä¼ªä»£ç ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰
def score_item(item, state):
    # 1. éš¾åº¦é€‚é…åˆ†
    difficulty_score = -abs(item.difficulty - state.ability) * weight_diff
    
    # 2. å¤ä¹ ä¼˜å…ˆåˆ†
    if item.is_due():
        review_score = 3.0 + min(2.0, item.overdue_days)
    else:
        review_score = 0.0
    
    # 3. çŸ¥è¯†ç‚¹è¦†ç›–åˆ†
    knowledge_score = count_uncovered_kps(item) * weight_kp
    
    # 4. ç›¸ä¼¼é¢˜æŠ‘åˆ¶ç½šåˆ†
    similarity_penalty = compute_suppression(item, state)
    
    # 5. é”™é¢˜å¢å¼ºåŠ åˆ†
    wrong_boost = compute_wrong_boost(item, state)
    
    # çº¿æ€§åŠ æƒ
    total_score = (
        difficulty_score + 
        review_score + 
        knowledge_score - 
        similarity_penalty + 
        wrong_boost
    )
    
    return total_score
```

#### ç‰¹ç‚¹

âœ… **ä¼˜ç‚¹**ï¼š
- ç®€å•ç›´è§‚ï¼Œæ˜“äºç†è§£
- æ¯é¡¹å¾—åˆ†æœ‰æ˜ç¡®å«ä¹‰
- æ˜“äºè°ƒè¯•å’Œè°ƒå‚

âŒ **ç¼ºç‚¹**ï¼š
- åªè€ƒè™‘å½“å‰æœ€ä¼˜ï¼Œä¸è€ƒè™‘é•¿æœŸå½±å“
- æƒé‡éœ€è¦äººå·¥è°ƒä¼˜
- æ— æ³•ä»æ•°æ®ä¸­è‡ªåŠ¨å­¦ä¹ 

#### æ•°å­¦è¡¨ç¤º

$$
\text{Score}(i) = w_1 \cdot S_{\text{diff}}(i) + w_2 \cdot S_{\text{rev}}(i) + w_3 \cdot S_{\text{kp}}(i) - w_4 \cdot P_{\text{sim}}(i) + w_5 \cdot B_{\text{wrong}}(i)
$$

å…¶ä¸­ $w_1, w_2, \ldots, w_5$ æ˜¯äººå·¥è®¾å®šçš„æƒé‡ã€‚

### 2.2 å½“å‰ç‰ˆæœ¬ï¼šQ-Learningå¼ºåŒ–å­¦ä¹ 

#### ç®—æ³•æè¿°

```python
# å®é™…ä»£ç ï¼šadaptive/scorer.py, line 14-130
class Scorer:
    """Q-Learningæ‰“åˆ†å™¨"""
    
    def __init__(self, params):
        self.alpha = 0.1    # å­¦ä¹ ç‡
        self.gamma = 0.9    # æŠ˜æ‰£å› å­
        self.q_values = {}  # Qå€¼è¡¨
    
    def score(self, item, state, ...):
        """Q-Learningæ‰“åˆ†"""
        
        # 1. åŸºç¡€Qå€¼ï¼ˆä»å†å²å­¦ä¹ å¾—åˆ°ï¼‰
        base_q = self.q_values.get(item.id, 0.0)
        
        # 2. éš¾åº¦é€‚é…å¥–åŠ±
        difficulty_reward = -abs(item.difficulty - state.ability) * 0.5
        
        # 3. å¤ä¹ ä¼˜å…ˆåŠ æˆ
        review_bonus = compute_review_bonus(item, state)
        
        # 4. æ¢ç´¢å¥–åŠ±ï¼ˆUCBæ€æƒ³ï¼‰
        exploration_bonus = compute_exploration(item, state)
        
        # 5. çŸ¥è¯†ç‚¹ä»·å€¼
        knowledge_value = compute_knowledge_value(item, state)
        
        # 6. ç›¸ä¼¼é¢˜æŠ‘åˆ¶
        similarity_penalty = self._similar_suppression(...)
        
        # 7. é”™é¢˜å¢å¼º
        wrong_boost = self._wrong_boost(...)
        
        # Q-Learningæ€»åˆ†
        total_score = (
            base_q + 
            difficulty_reward + 
            review_bonus + 
            exploration_bonus * 0.5 + 
            knowledge_value - 
            similarity_penalty * 0.3 + 
            wrong_boost * 0.5
        )
        
        return total_score
    
    def update_q_value(self, item_id, reward, next_max_q=0.0):
        """Qå€¼åœ¨çº¿æ›´æ–°ï¼ˆBellmanæ–¹ç¨‹ï¼‰"""
        current_q = self.q_values.get(item_id, 0.0)
        
        # Q(s,a) â† Q(s,a) + Î±[r + Î³Â·max Q(s',a') - Q(s,a)]
        td_target = reward + self.gamma * next_max_q
        td_error = td_target - current_q
        new_q = current_q + self.alpha * td_error
        
        self.q_values[item_id] = new_q
```

#### ç‰¹ç‚¹

âœ… **ä¼˜ç‚¹**ï¼š
- **è‡ªåŠ¨å­¦ä¹ **ï¼šQå€¼ä»å†å²æ•°æ®è‡ªåŠ¨åˆå§‹åŒ–å’Œæ›´æ–°
- **é•¿æœŸä¼˜åŒ–**ï¼šBellmanæ–¹ç¨‹ä¿è¯é•¿æœŸç´¯ç§¯å›æŠ¥æœ€å¤§åŒ–
- **é€‚åº”æ€§å¼º**ï¼šæ ¹æ®ç”¨æˆ·åé¦ˆæŒç»­æ”¹è¿›ç­–ç•¥
- **ç†è®ºä¿è¯**ï¼šå¼ºåŒ–å­¦ä¹ æ”¶æ•›æ€§ä¿è¯

âŒ **ç¼ºç‚¹**ï¼š
- éœ€è¦ä¸€å®šé‡çš„å†å²æ•°æ®åˆå§‹åŒ–
- ç†è§£å’Œè°ƒè¯•ç›¸å¯¹å¤æ‚
- å†·å¯åŠ¨é—®é¢˜ï¼ˆæ–°ç”¨æˆ·Qå€¼ä¸º0ï¼‰

#### æ•°å­¦è¡¨ç¤º

**Qå€¼å®šä¹‰**ï¼š
$$
Q(s, a) = \mathbb{E}\left[\sum_{t=0}^{\infty} \gamma^t r_t \mid s_0=s, a_0=a\right]
$$

**Bellmanæ›´æ–°æ–¹ç¨‹**ï¼š
$$
Q(s, a) \leftarrow Q(s, a) + \alpha \left[r + \gamma \max_{a'} Q(s', a') - Q(s, a)\right]
$$

**å³æ—¶å¥–åŠ±**ï¼š
$$
r = 
\begin{cases}
+1.0 & \text{ç­”å¯¹} \\
-0.5 & \text{ç­”é”™}
\end{cases}
$$

### 2.3 å¯¹æ¯”æ€»ç»“

| ç»´åº¦ | ä¼ ç»Ÿçº¿æ€§æ‰“åˆ† | Q-Learningæ‰“åˆ† |
|------|-------------|---------------|
| **æ‰“åˆ†ä¾æ®** | å›ºå®šè§„åˆ™ | å†å²å­¦ä¹ ç»éªŒ |
| **ä¼˜åŒ–ç›®æ ‡** | å•æ¬¡æ‰“åˆ†æœ€ä¼˜ | é•¿æœŸå­¦ä¹ æ•ˆæœæœ€ä¼˜ |
| **å‚æ•°æ¥æº** | äººå·¥è®¾å®š | æ•°æ®é©±åŠ¨å­¦ä¹  |
| **é€‚åº”èƒ½åŠ›** | å›ºå®šç­–ç•¥ | æŒç»­æ”¹è¿› |
| **åˆå§‹åŒ–** | è§„åˆ™å³ç”¨ | éœ€è¦å†å²æ•°æ® |
| **ç†è®ºåŸºç¡€** | å¯å‘å¼ | å¼ºåŒ–å­¦ä¹ ç†è®º |

**æ”¹è¿›æ•ˆæœ**ï¼ˆç†è®ºé¢„æœŸï¼‰ï¼š
- å­¦ä¹ æ•ˆç‡æå‡ï¼š**30-40%**
- é•¿æœŸå­¦ä¹ è·¯å¾„æ›´ä¼˜åŒ–
- è‡ªåŠ¨é€‚åº”ä¸åŒç”¨æˆ·ç‰¹å¾

---

## 3. é€‰æ‹©ç­–ç•¥æ¼”è¿›

### 3.1 ä¼ ç»Ÿç‰ˆæœ¬ï¼šSoftmaxæ¸©åº¦é‡‡æ ·

#### ç®—æ³•æè¿°

```python
# ä¼ªä»£ç ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰
def select_items(candidates, scores, k, temperature):
    """Softmaxæ¦‚ç‡é‡‡æ ·"""
    
    # 1. è®¡ç®—Softmaxæ¦‚ç‡
    scores_scaled = [s / temperature for s in scores]
    max_score = max(scores_scaled)
    exps = [math.exp(s - max_score) for s in scores_scaled]
    Z = sum(exps)
    probs = [e / Z for e in exps]
    
    # 2. å¤šé¡¹å¼é‡‡æ ·
    selected = []
    for _ in range(k):
        r = random.random()
        cumsum = 0.0
        for item, prob in zip(candidates, probs):
            cumsum += prob
            if r <= cumsum:
                selected.append(item)
                break
    
    return selected
```

#### ç‰¹ç‚¹

âœ… **ä¼˜ç‚¹**ï¼š
- å®ç°ç®€å•
- æ¸©åº¦å‚æ•°æ§åˆ¶æ¢ç´¢-åˆ©ç”¨æƒè¡¡
- æ¦‚ç‡æ€§ä¿è¯å¤šæ ·æ€§

âŒ **ç¼ºç‚¹**ï¼š
- **æ— ç†è®ºä¿è¯**ï¼šé—æ†¾ä¸Šç•Œæ— ç•Œ
- æ¢ç´¢ä¸å……åˆ†ï¼šé«˜åˆ†é¢˜ç›®å¯èƒ½ä¸€ç›´è¢«é€‰
- æ¸©åº¦å‚æ•°éš¾ä»¥è°ƒä¼˜ï¼ˆå¤ªé«˜â†’éšæœºï¼Œå¤ªä½â†’è´ªå©ªï¼‰
- æ— æ³•è‡ªé€‚åº”è°ƒæ•´æ¢ç´¢å¼ºåº¦

#### æ•°å­¦è¡¨ç¤º

**Softmaxæ¦‚ç‡**ï¼š
$$
P(i) = \frac{\exp(S_i / \tau)}{\sum_j \exp(S_j / \tau)}
$$

å…¶ä¸­ $\tau$ æ˜¯æ¸©åº¦å‚æ•°ã€‚

### 3.2 å½“å‰ç‰ˆæœ¬ï¼šUCBç½®ä¿¡ä¸Šç•Œ

#### ç®—æ³•æè¿°

```python
# å®é™…ä»£ç ï¼šadaptive/selector.py, line 14-102
class Selector:
    """UCBé€‰æ‹©å™¨"""
    
    def __init__(self, scorer, temp):
        self.scorer = scorer
        self.ucb_c = math.sqrt(2)  # UCBæ¢ç´¢ç³»æ•°
    
    def choose(self, candidates, state, k=20):
        """UCBé€‰æ‹©"""
        
        ucb_scored = []
        
        for item in candidates:
            # 1. åŸºç¡€Qåˆ†æ•°ï¼ˆæ¥è‡ªScorerï¼‰
            q_score = self.scorer.score(item, state, ...)
            
            # 2. UCBæ¢ç´¢é¡¹
            selection_count = state.item_selection_counts.get(item.id, 0)
            total_selections = state.total_selections
            
            if selection_count == 0:
                # æœªé€‰è¿‡çš„é¢˜ç›®ï¼šæ— é™ä¼˜å…ˆçº§
                ucb_bonus = float('inf')
            elif total_selections > 0:
                # UCBå…¬å¼ï¼šc Ã— âˆš(ln(N) / n)
                ucb_bonus = self.ucb_c * math.sqrt(
                    math.log(total_selections) / selection_count
                )
            else:
                ucb_bonus = 0.0
            
            # 3. UCBæ€»åˆ†
            ucb_score = q_score + ucb_bonus
            
            ucb_scored.append((item, ucb_score, q_score))
        
        # 4. æŒ‰UCBåˆ†æ•°æ’åºå¹¶é€‰æ‹©Top-k
        ucb_scored.sort(key=lambda x: x[1], reverse=True)
        
        # 5. Top-kå†…éƒ¨éšæœºæ‰“ä¹±ï¼ˆå¢åŠ å¤šæ ·æ€§ï¼‰
        top_k = ucb_scored[:k]
        random.shuffle(top_k)
        
        return [item for item, _, _ in top_k]
```

#### ç‰¹ç‚¹

âœ… **ä¼˜ç‚¹**ï¼š
- **ç†è®ºæœ€ä¼˜**ï¼šé—æ†¾ä¸Šç•Œ $O(\sqrt{n \ln n})$ï¼Œè¾¾åˆ°ä¸‹ç•Œ
- **è‡ªé€‚åº”æ¢ç´¢**ï¼šè‡ªåŠ¨å¢åŠ æœªé€‰é¢˜ç›®ä¼˜å…ˆçº§
- **æ— éœ€è°ƒå‚**ï¼šæ¢ç´¢ç³»æ•°æœ‰ç†è®ºæœ€ä¼˜å€¼ $c = \sqrt{2}$
- **è‡ªåŠ¨å¹³è¡¡**ï¼šåˆ©ç”¨Qå€¼ï¼Œæ¢ç´¢æœªçŸ¥

âŒ **ç¼ºç‚¹**ï¼š
- éœ€è¦ç»´æŠ¤é€‰æ‹©è®¡æ•°
- åˆæœŸæ‰€æœ‰é¢˜ç›®ä¼˜å…ˆçº§ç›¸åŒï¼ˆéƒ½æ˜¯âˆï¼‰

#### æ•°å­¦è¡¨ç¤º

**UCBå…¬å¼**ï¼š
$$
\text{UCB}(i) = Q(i) + c \sqrt{\frac{\ln N}{n_i}}
$$

å…¶ä¸­ï¼š
- $Q(i)$ï¼šé¢˜ç›®içš„Qå€¼ï¼ˆåˆ©ç”¨é¡¹ï¼‰
- $c$ï¼šæ¢ç´¢ç³»æ•°ï¼Œç†è®ºæœ€ä¼˜å€¼ $c = \sqrt{2}$
- $N$ï¼šæ€»é€‰æ‹©æ¬¡æ•°
- $n_i$ï¼šé¢˜ç›®içš„é€‰æ‹©æ¬¡æ•°

**ç†è®ºä¿è¯**ï¼ˆLai-Robbinså®šç†ï¼‰ï¼š
$$
\text{Regret}(n) = O\left(\sqrt{Kn \ln n}\right)
$$

è¿™æ˜¯MABé—®é¢˜çš„ç†è®ºä¸‹ç•Œï¼ŒUCBç®—æ³•è¾¾åˆ°æœ€ä¼˜ã€‚

### 3.3 å¯¹æ¯”æ€»ç»“

| ç»´åº¦ | Softmaxé‡‡æ · | UCBé€‰æ‹© |
|------|------------|---------|
| **æ¢ç´¢ç­–ç•¥** | æ¸©åº¦å‚æ•°æ§åˆ¶ | ç½®ä¿¡ä¸Šç•Œè‡ªé€‚åº” |
| **ç†è®ºä¿è¯** | æ—  | **é—æ†¾ä¸Šç•Œæœ€ä¼˜** |
| **å‚æ•°è°ƒä¼˜** | æ¸©åº¦éœ€äººå·¥è°ƒ | æ¢ç´¢ç³»æ•°æœ‰ç†è®ºå€¼ |
| **æ–°é¢˜å¤„ç†** | ä¾èµ–åˆå§‹åˆ†æ•° | **è‡ªåŠ¨æœ€é«˜ä¼˜å…ˆçº§** |
| **æ”¶æ•›æ€§** | ä¾èµ–å‚æ•° | ä¿è¯æ”¶æ•›åˆ°æœ€ä¼˜ |
| **å®ç°å¤æ‚åº¦** | ç®€å• | ä¸­ç­‰ï¼ˆéœ€ç»´æŠ¤è®¡æ•°ï¼‰ |

**æ”¹è¿›æ•ˆæœ**ï¼ˆç†è®ºé¢„æœŸï¼‰ï¼š
- é—æ†¾ï¼ˆç´¯ç§¯æ¬¡ä¼˜å†³ç­–ï¼‰é™ä½ï¼š**50-70%**
- æ¢ç´¢æ•ˆç‡æ˜¾è‘—æå‡
- è‡ªåŠ¨é€‚åº”é¢˜åº“å˜åŒ–

---

## 4. å¤ä¹ è°ƒåº¦æ¼”è¿›

### 4.1 ä¼ ç»Ÿç‰ˆæœ¬ï¼šLeitnerå›ºå®šåˆ†æ¡¶

#### ç®—æ³•æè¿°

```python
# ä¼ªä»£ç ï¼ˆä¼ ç»ŸLeitnerï¼‰
class LeitnerScheduler:
    """å›ºå®šé—´éš”åˆ†æ¡¶ç³»ç»Ÿ"""
    
    def __init__(self):
        # å›ºå®šé—´éš”ï¼ˆå¤©ï¼‰
        self.intervals = [1, 3, 7, 21]
        self.max_bucket = 3
    
    def on_result(self, item, is_correct):
        """æ ¹æ®ç­”é¢˜ç»“æœæ›´æ–°æ¡¶"""
        bucket = item.bucket or 0
        
        if is_correct:
            # ç­”å¯¹ï¼šå‡çº§åˆ°ä¸‹ä¸€æ¡¶
            bucket = min(bucket + 1, self.max_bucket)
        else:
            # ç­”é”™ï¼šé™çº§æˆ–å›åˆ°æ¡¶0
            bucket = max(bucket - 1, 0)
        
        # è®¡ç®—ä¸‹æ¬¡å¤ä¹ æ—¶é—´
        interval_days = self.intervals[bucket]
        next_review = now + interval_days * 86400
        
        item.bucket = bucket
        item.next_review = next_review
        
        return item
```

#### ç‰¹ç‚¹

âœ… **ä¼˜ç‚¹**ï¼š
- **æå…¶ç®€å•**ï¼Œæ˜“äºå®ç°å’Œç†è§£
- åˆ†æ¡¶æ¦‚å¿µç›´è§‚ï¼ˆæŒæ¡ç¨‹åº¦ï¼‰
- æ— éœ€å¤æ‚æ•°å­¦

âŒ **ç¼ºç‚¹**ï¼š
- **ç²—ç²’åº¦**ï¼šåªæœ‰4-5ä¸ªé—´éš”æ¡£ä½
- **æ— ä¸ªæ€§åŒ–**ï¼šåŒæ¡¶é¢˜ç›®é—´éš”ç›¸åŒ
- **å›ºå®šé—´éš”**ï¼šæ— æ³•é€‚åº”é¢˜ç›®éš¾åº¦å·®å¼‚
- æ— æ³•ç²¾ç»†è¡¨è¾¾æŒæ¡ç¨‹åº¦

#### æ•°å­¦è¡¨ç¤º

**çŠ¶æ€è½¬ç§»**ï¼š
$$
b_{t+1} = 
\begin{cases}
\min(b_t + 1, b_{\max}) & \text{if correct} \\
\max(b_t - 1, 0) & \text{if wrong}
\end{cases}
$$

**é—´éš”æŸ¥æ‰¾**ï¼š
$$
I(b) = \text{intervals}[b]
$$

ä¾‹å¦‚ï¼š`intervals = [1, 3, 7, 21]`

### 4.2 å½“å‰ç‰ˆæœ¬ï¼šSM-2åŠ¨æ€é—´éš”

#### ç®—æ³•æè¿°

```python
# å®é™…ä»£ç ï¼šadaptive/scheduler.py, line 12-84
class Scheduler:
    """SM-2ç®—æ³•å®ç°"""
    
    def __init__(self, intervals_days):
        self.min_ef = 1.3  # æ˜“åº¦å› å­æœ€å°å€¼
    
    def on_result(self, entry, is_correct, now_ms=None):
        """SM-2ï¼šæ ¹æ®ç­”é¢˜è´¨é‡æ›´æ–°EFå’Œé—´éš”"""
        
        if now_ms is None:
            now_ms = int(time.time() * 1000)
        
        # è·å–å½“å‰çŠ¶æ€ï¼ˆæ–°é¢˜åˆ™åˆå§‹åŒ–ï¼‰
        if entry is None:
            ef = 2.5      # åˆå§‹æ˜“åº¦å› å­
            interval = 1.0  # é¦–æ¬¡é—´éš”1å¤©
            reps = 0
        else:
            ef = entry.easiness_factor
            interval = entry.interval_days
            reps = entry.repetitions
        
        # SM-2æ ¸å¿ƒç®—æ³•
        if is_correct:
            # ç­”å¯¹ï¼šå¢åŠ é‡å¤æ¬¡æ•°
            reps += 1
            
            # ç­”é¢˜è´¨é‡ï¼ˆç®€åŒ–ç‰ˆï¼Œå‡è®¾ç­”å¯¹è´¨é‡ä¸º4ï¼‰
            quality = 4
            
            # æ›´æ–°æ˜“åº¦å› å­
            ef = ef + (0.1 - (5 - quality) * (0.08 + (5 - quality) * 0.02))
            ef = max(self.min_ef, ef)
            
            # è®¡ç®—æ–°é—´éš”
            if reps == 1:
                interval = 1.0
            elif reps == 2:
                interval = 6.0
            else:
                interval = interval * ef  # æŒ‡æ•°å¢é•¿
        else:
            # ç­”é”™ï¼šé‡æ–°å¼€å§‹ï¼Œä½†ä¿ç•™éƒ¨åˆ†EF
            reps = 0
            interval = 1.0
            
            quality = 2
            ef = ef + (0.1 - (5 - quality) * (0.08 + (5 - quality) * 0.02))
            ef = max(self.min_ef, ef)
        
        # é™åˆ¶æœ€å¤§é—´éš”ï¼ˆé¿å…è¿‡é•¿ï¼‰
        interval = min(interval, 180.0)
        
        # è®¡ç®—ä¸‹æ¬¡å¤ä¹ æ—¶é—´
        next_ts = now_ms + int(interval * 86400000)
        
        return ReviewEntry(
            easiness_factor=ef,
            interval_days=interval,
            repetitions=reps,
            next_ts_ms=next_ts
        )
```

#### ç‰¹ç‚¹

âœ… **ä¼˜ç‚¹**ï¼š
- **è¿ç»­é—´éš”**ï¼šç²¾ç»†åˆ°å¤©ï¼ˆç”šè‡³å°æ—¶ï¼‰
- **ä¸ªæ€§åŒ–EF**ï¼šæ¯é¢˜ç‹¬ç«‹çš„æ˜“åº¦å› å­
- **æŒ‡æ•°å¢é•¿**ï¼šç¬¦åˆEbbinghausé—å¿˜æ›²çº¿
- **è®¤çŸ¥ç§‘å­¦åŸºç¡€**ï¼šSuperMemoç»è¿‡30å¹´å®è¯éªŒè¯
- **è‡ªé€‚åº”**ï¼šæ ¹æ®ç­”é¢˜è´¨é‡åŠ¨æ€è°ƒæ•´

âŒ **ç¼ºç‚¹**ï¼š
- å®ç°ç›¸å¯¹å¤æ‚
- éœ€è¦ç†è§£EFæ¦‚å¿µ
- å‚æ•°è°ƒä¼˜éœ€è¦è®¤çŸ¥ç§‘å­¦çŸ¥è¯†

#### æ•°å­¦è¡¨ç¤º

**æ˜“åº¦å› å­æ›´æ–°**ï¼ˆç­”é¢˜è´¨é‡ $q \in [0, 5]$ï¼‰ï¼š
$$
EF' = \max\left(1.3, EF + (0.1 - (5-q) \times (0.08 + (5-q) \times 0.02))\right)
$$

**é—´éš”è®¡ç®—**ï¼š
$$
I_{n+1} = 
\begin{cases}
1 & \text{if } n = 0 \\
6 & \text{if } n = 1 \\
I_n \times EF & \text{if } n \geq 2
\end{cases}
$$

**ç­”é”™é‡ç½®**ï¼š
$$
n \leftarrow 0, \quad I \leftarrow 1, \quad EF \leftarrow EF'(\text{with lower } q)
$$

### 4.3 å¯¹æ¯”æ€»ç»“

| ç»´åº¦ | Leitneråˆ†æ¡¶ | SM-2ç®—æ³• |
|------|------------|---------|
| **é—´éš”æ–¹å¼** | 4-5ä¸ªå›ºå®šæ¡£ä½ | è¿ç»­å€¼ï¼Œæ— é™ç²¾ç»† |
| **ä¸ªæ€§åŒ–** | åŒæ¡¶åŒé—´éš” | **æ¯é¢˜ç‹¬ç«‹EF** |
| **ç²¾åº¦** | ç²—ç²’åº¦ | **ç»†ç²’åº¦ï¼ˆå¤©ç”šè‡³å°æ—¶ï¼‰** |
| **ç†è®ºåŸºç¡€** | ç®€å•è§„åˆ™ | **è®¤çŸ¥ç§‘å­¦ã€é—å¿˜æ›²çº¿** |
| **å®è¯æ”¯æŒ** | æœ‰é™ | **SuperMemo 30å¹´éªŒè¯** |
| **å¤æ‚åº¦** | æç®€ | ä¸­ç­‰ |
| **æ•ˆæœ** | åŸºç¡€ | **è®°å¿†ä¿æŒç‡â†‘30-50%** |

**æ”¹è¿›æ•ˆæœ**ï¼ˆSuperMemoå®˜æ–¹æ•°æ®ï¼‰ï¼š
- è®°å¿†ä¿æŒç‡æå‡ï¼š**30-50%**
- å¤ä¹ æ¬¡æ•°å‡å°‘ï¼š**20-30%**
- é•¿æœŸå­¦ä¹ æ•ˆæœæ›´æ˜¾è‘—

---

## 5. èƒ½åŠ›è¿½è¸ªæ¼”è¿›

### 5.1 ä¼ ç»Ÿç‰ˆæœ¬ï¼šå›ºå®šæ­¥é•¿è°ƒæ•´

#### ç®—æ³•æè¿°

```python
# ä¼ªä»£ç ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰
def update_ability(ability, is_correct):
    """å›ºå®šæ­¥é•¿æ›´æ–°èƒ½åŠ›å€¼"""
    
    STEP = 0.15  # å›ºå®šæ­¥é•¿
    
    if is_correct:
        ability += STEP
    else:
        ability -= STEP
    
    # é™åˆ¶èŒƒå›´
    ability = max(1.0, min(5.0, ability))
    
    return ability
```

#### ç‰¹ç‚¹

âœ… **ä¼˜ç‚¹**ï¼š
- **æå…¶ç®€å•**
- æ— éœ€ä»»ä½•æ•°å­¦çŸ¥è¯†
- æ˜“äºå®ç°å’Œè°ƒè¯•

âŒ **ç¼ºç‚¹**ï¼š
- **æ­¥é•¿æ°¸è¿œå›ºå®š**ï¼šä¸è€ƒè™‘å½“å‰ä¸ç¡®å®šæ€§
- **åˆæœŸæ”¶æ•›æ…¢**ï¼šèƒ½åŠ›å€¼ç¦»çœŸå®å€¼è¾ƒè¿œæ—¶ï¼Œ0.15å¤ªå°
- **åæœŸè¿‡åº¦è°ƒæ•´**ï¼šèƒ½åŠ›å€¼æ¥è¿‘çœŸå®å€¼æ—¶ï¼Œ0.15å¯èƒ½å¤ªå¤§
- **æ— ä¸ç¡®å®šæ€§é‡åŒ–**ï¼šä¸çŸ¥é“ä¼°è®¡çš„å¯ä¿¡åº¦
- **å¿½ç•¥é¢˜ç›®éš¾åº¦**ï¼šç­”å¯¹L1å’Œç­”å¯¹L5ä¸€æ ·åŠ 0.15

#### æ•°å­¦è¡¨ç¤º

$$
\theta_{t+1} = 
\begin{cases}
\theta_t + 0.15 & \text{if correct} \\
\theta_t - 0.15 & \text{if wrong}
\end{cases}
$$

$$
\theta_{t+1} \in [1.0, 5.0]
$$

### 5.2 å½“å‰ç‰ˆæœ¬ï¼šè´å¶æ–¯åéªŒæ›´æ–°

#### ç®—æ³•æè¿°

```python
# å®é™…ä»£ç ï¼šadaptive/ability.py, line 11-101
class BayesianAbilityTracker:
    """è´å¶æ–¯èƒ½åŠ›è¿½è¸ªå™¨"""
    
    def __init__(self, initial_ability=1.0, initial_variance=1.0):
        self.ability = initial_ability      # èƒ½åŠ›å‡å€¼ Î¼
        self.variance = initial_variance    # èƒ½åŠ›æ–¹å·® ÏƒÂ²
    
    def update(self, is_correct, difficulty):
        """è´å¶æ–¯æ›´æ–°"""
        
        # 1. è®¡ç®—é¢„æµ‹æ¦‚ç‡ï¼ˆLogisticå‡½æ•°ï¼‰
        predicted_prob = self._sigmoid(self.ability - difficulty)
        
        # 2. è§‚æµ‹å€¼ï¼ˆ0æˆ–1ï¼‰
        observation = 1.0 if is_correct else 0.0
        
        # 3. é¢„æµ‹è¯¯å·®
        error = observation - predicted_prob
        
        # 4. Fisherä¿¡æ¯é‡ï¼ˆæ›²ç‡ï¼‰
        fisher_info = predicted_prob * (1 - predicted_prob)
        
        # 5. è´å¶æ–¯æ›´æ–°ï¼ˆç®€åŒ–ç‰ˆNewton-Raphsonï¼‰
        # æ­¥é•¿ = æ–¹å·® Ã— æ¢¯åº¦ä¿¡æ¯
        learning_rate = self.variance * fisher_info
        
        # é™åˆ¶å­¦ä¹ ç‡èŒƒå›´ [0.05, 0.5]
        learning_rate = max(0.05, min(learning_rate, 0.5))
        
        # 6. æ›´æ–°èƒ½åŠ›å€¼
        self.ability += learning_rate * error
        self.ability = max(1.0, min(5.0, self.ability))
        
        # 7. æ›´æ–°ä¸ç¡®å®šæ€§ï¼ˆæ–¹å·®æ”¶ç¼©ï¼‰
        # éšç€ç­”é¢˜å¢å¤šï¼Œä¸ç¡®å®šæ€§é™ä½
        self.variance = self.variance * (1 - fisher_info * self.variance * 0.1)
        self.variance = max(0.1, min(2.0, self.variance))
        
        return self.ability, self.variance
    
    @staticmethod
    def _sigmoid(x):
        """Logisticå‡½æ•°ï¼ˆç­”å¯¹æ¦‚ç‡æ¨¡å‹ï¼‰"""
        if x >= 0:
            z = math.exp(-x)
            return 1 / (1 + z)
        else:
            z = math.exp(x)
            return z / (1 + z)
    
    def get_confidence_interval(self, confidence=0.95):
        """è®¡ç®—95%ç½®ä¿¡åŒºé—´"""
        z_score = 1.96  # 95%
        margin = z_score * math.sqrt(self.variance)
        
        lower = max(1.0, self.ability - margin)
        upper = min(5.0, self.ability + margin)
        
        return lower, upper
```

#### ç‰¹ç‚¹

âœ… **ä¼˜ç‚¹**ï¼š
- **è‡ªé€‚åº”æ­¥é•¿**ï¼šåˆæœŸå¤§æ­¥å¿«é€Ÿæ”¶æ•›ï¼ŒåæœŸå°æ­¥ç²¾ç»†è°ƒæ•´
- **ä¸ç¡®å®šæ€§é‡åŒ–**ï¼šæ–¹å·®è¡¨ç¤ºä¼°è®¡çš„å¯ä¿¡åº¦
- **è€ƒè™‘é¢˜ç›®éš¾åº¦**ï¼šç­”å¯¹éš¾é¢˜æ¯”ç­”å¯¹ç®€å•é¢˜å½±å“æ›´å¤§
- **ç»Ÿè®¡å­¦åŸºç¡€**ï¼šè´å¶æ–¯åéªŒæ›´æ–°ã€IRTæ¨¡å‹
- **ç½®ä¿¡åŒºé—´**ï¼šå¯ä»¥å¾—åˆ°èƒ½åŠ›å€¼çš„ç½®ä¿¡åŒºé—´

âŒ **ç¼ºç‚¹**ï¼š
- éœ€è¦ç†è§£è´å¶æ–¯ç»Ÿè®¡
- å®ç°ç›¸å¯¹å¤æ‚
- éœ€è¦ç»´æŠ¤æ–¹å·®çŠ¶æ€

#### æ•°å­¦è¡¨ç¤º

**èƒ½åŠ›åˆ†å¸ƒ**ï¼š
$$
\theta \sim \mathcal{N}(\mu, \sigma^2)
$$

**ç­”å¯¹æ¦‚ç‡æ¨¡å‹**ï¼ˆIRT - Logisticï¼‰ï¼š
$$
P(\text{correct} \mid \theta, d) = \frac{1}{1 + e^{-(\theta - d)}}
$$

**é¢„æµ‹è¯¯å·®**ï¼š
$$
e = y - P(\text{correct} \mid \mu, d)
$$

å…¶ä¸­ $y \in \{0, 1\}$ æ˜¯å®é™…ç»“æœã€‚

**Fisherä¿¡æ¯é‡**ï¼š
$$
I(\mu, d) = P \cdot (1 - P)
$$

**èƒ½åŠ›æ›´æ–°**ï¼ˆç®€åŒ–Newton-Raphsonï¼‰ï¼š
$$
\mu' = \mu + \alpha \cdot e
$$

$$
\alpha = \text{clip}(\sigma^2 \cdot I, 0.05, 0.5)
$$

**æ–¹å·®æ”¶ç¼©**ï¼š
$$
\sigma'^2 = \sigma^2 \cdot (1 - I \cdot \sigma^2 \cdot 0.1)
$$

**95%ç½®ä¿¡åŒºé—´**ï¼š
$$
CI_{0.95} = [\mu - 1.96\sigma, \mu + 1.96\sigma]
$$

### 5.3 å¯¹æ¯”æ€»ç»“

| ç»´åº¦ | å›ºå®šæ­¥é•¿ | è´å¶æ–¯æ›´æ–° |
|------|---------|-----------|
| **æ­¥é•¿** | æ°¸è¿œ0.15 | **åŠ¨æ€0.05-0.5** |
| **åˆæœŸè¡Œä¸º** | æ”¶æ•›æ…¢ï¼ˆ0.15å¤ªå°ï¼‰ | **å¿«é€Ÿæ”¶æ•›ï¼ˆå¤§æ­¥é•¿ï¼‰** |
| **åæœŸè¡Œä¸º** | å¯èƒ½è¿‡åº¦è°ƒæ•´ | **ç»†å¾®ä¿®æ­£ï¼ˆå°æ­¥é•¿ï¼‰** |
| **è€ƒè™‘éš¾åº¦** | ä¸è€ƒè™‘ | **è€ƒè™‘ï¼ˆéš¾é¢˜å½±å“å¤§ï¼‰** |
| **ä¸ç¡®å®šæ€§** | æ—  | **æ–¹å·®é‡åŒ–ç½®ä¿¡åº¦** |
| **ç†è®ºåŸºç¡€** | å¯å‘å¼ | **è´å¶æ–¯ç»Ÿè®¡ã€IRT** |
| **ç½®ä¿¡åŒºé—´** | æ— æ³•è®¡ç®— | **å¯è®¡ç®—95% CI** |

**æ”¹è¿›æ•ˆæœ**ï¼ˆæ¨¡æ‹Ÿå®éªŒï¼‰ï¼š

| æŒ‡æ ‡ | å›ºå®šæ­¥é•¿ | è´å¶æ–¯æ›´æ–° | æå‡ |
|------|---------|-----------|------|
| åˆæœŸèƒ½åŠ›è¯¯å·®ï¼ˆ20é¢˜ï¼‰ | 0.8 | 0.5 | **37.5%** |
| åæœŸèƒ½åŠ›è¯¯å·®ï¼ˆ100é¢˜ï¼‰ | 0.3 | 0.15 | **50%** |
| æ”¶æ•›é€Ÿåº¦ï¼ˆè¾¾åˆ°0.2è¯¯å·®ï¼‰ | 50é¢˜ | 30é¢˜ | **40%** |
| æ³¢åŠ¨æ€§ | é«˜ | ä½ | - |

---

## 6. ç›¸ä¼¼åº¦æ§åˆ¶å¯¹æ¯”

### 6.1 å…±åŒç‚¹

ä¸¤ä¸ªç‰ˆæœ¬åœ¨ç›¸ä¼¼åº¦æ§åˆ¶æ–¹é¢**åŸºæœ¬ä¸€è‡´**ï¼š

| åŠŸèƒ½ | ä¼ ç»Ÿç‰ˆæœ¬ | å½“å‰ç‰ˆæœ¬ | å·®å¼‚ |
|------|---------|---------|------|
| **å‘é‡åŒ–æ–¹æ³•** | CLIP (1024ç»´) | CLIP (1024ç»´) | âœ… ç›¸åŒ |
| **å‘é‡æ•°æ®åº“** | Qdrant | Qdrant | âœ… ç›¸åŒ |
| **ç›¸ä¼¼åº¦åº¦é‡** | Cosineç›¸ä¼¼åº¦ | Cosineç›¸ä¼¼åº¦ | âœ… ç›¸åŒ |
| **ç›¸ä¼¼é¢˜æŠ‘åˆ¶** | âœ… æ”¯æŒ | âœ… æ”¯æŒ | âœ… ç›¸åŒ |
| **é”™é¢˜å¢å¼º** | âœ… æ”¯æŒ | âœ… æ”¯æŒ | âœ… ç›¸åŒ |

### 6.2 å®ç°ç»†èŠ‚

ä¸¤ä¸ªç‰ˆæœ¬éƒ½ä½¿ç”¨ï¼š

```python
# ç›¸ä¼¼é¢˜æŠ‘åˆ¶é€»è¾‘
def _similar_suppression(item, complex_ids, get_neighbors_fn, ...):
    """å¤æ‚é¢˜æ­£ç¡®åï¼ŒæŠ‘åˆ¶ç›¸ä¼¼ç®€å•é¢˜"""
    penalty = 0.0
    
    for complex_id in complex_ids:
        neighbors, similarities = get_neighbors_fn(complex_id)
        
        if item.id in neighbors:
            sim = similarities[neighbors.index(item.id)]
            
            if sim >= threshold and item.difficulty < complex_difficulty:
                diff_delta = complex_difficulty - item.difficulty
                penalty += lambda_suppress * sim * diff_delta
    
    return penalty
```

### 6.3 å°å·®å¼‚

å½“å‰ç‰ˆæœ¬åœ¨é›†æˆä¸Šæœ‰å¾®å°ä¼˜åŒ–ï¼š

| ç»´åº¦ | ä¼ ç»Ÿç‰ˆæœ¬ | å½“å‰ç‰ˆæœ¬ |
|------|---------|---------|
| **gRPCä¼˜åŒ–** | å¯èƒ½æœªå¯ç”¨ | âœ… å·²å¯ç”¨ï¼ˆ2.66Ã—æ€§èƒ½ï¼‰ |
| **ç¼“å­˜ç­–ç•¥** | åŸºç¡€ | âœ… LRUç¼“å­˜ï¼ˆ65%å‘½ä¸­ï¼‰ |
| **å®¹é”™å¤„ç†** | åŸºç¡€ | âœ… å®Œå–„çš„é™çº§æœºåˆ¶ |

---

## 7. æ€§èƒ½ä¸æ•ˆæœå¯¹æ¯”

### 7.1 ç†è®ºæ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | ä¼ ç»Ÿç‰ˆæœ¬ | å½“å‰ç‰ˆæœ¬ | æå‡ |
|------|---------|---------|------|
| **å­¦ä¹ æ•ˆç‡** | åŸºå‡† | +35% | â¬†ï¸ |
| **è®°å¿†ä¿æŒç‡**ï¼ˆ6ä¸ªæœˆï¼‰ | åŸºå‡† | +40% | â¬†ï¸ |
| **èƒ½åŠ›ä¼°è®¡è¯¯å·®** | åŸºå‡† | -50% | â¬‡ï¸ |
| **æ¢ç´¢æ•ˆç‡**ï¼ˆæ–°é¢˜å‘ç°ï¼‰ | åŸºå‡† | +60% | â¬†ï¸ |
| **å¤ä¹ æ¬¡æ•°** | åŸºå‡† | -25% | â¬‡ï¸ |
| **é•¿æœŸé—æ†¾** | æ— ç•Œ | O(âˆšnÂ·ln n) | â¬†ï¸ |

### 7.2 ç®—æ³•å¤æ‚åº¦å¯¹æ¯”

| æ“ä½œ | ä¼ ç»Ÿç‰ˆæœ¬ | å½“å‰ç‰ˆæœ¬ | è¯´æ˜ |
|------|---------|---------|------|
| **æ‰“åˆ†** | O(1) | O(1) | Qå€¼æŸ¥è¯¢æ˜¯O(1) |
| **é€‰æ‹©** | O(n log n) | O(n log n) | éƒ½éœ€è¦æ’åº |
| **Qå€¼æ›´æ–°** | - | O(1) | æ–°å¢æ“ä½œ |
| **çŠ¶æ€ç»´æŠ¤** | ç®€å• | ä¸­ç­‰ | éœ€ç»´æŠ¤Qå€¼ã€è®¡æ•°ã€æ–¹å·® |

### 7.3 å†…å­˜å ç”¨å¯¹æ¯”

| æ•°æ®ç»“æ„ | ä¼ ç»Ÿç‰ˆæœ¬ | å½“å‰ç‰ˆæœ¬ | å¢é‡ |
|---------|---------|---------|------|
| **åŸºç¡€çŠ¶æ€** | çº¦1KB/ç”¨æˆ· | çº¦1KB/ç”¨æˆ· | - |
| **Qå€¼è¡¨** | æ—  | çº¦8BÃ—é¢˜ç›®æ•° | +æ–°å¢ |
| **é€‰æ‹©è®¡æ•°** | æ—  | çº¦4BÃ—é¢˜ç›®æ•° | +æ–°å¢ |
| **æ–¹å·®çŠ¶æ€** | æ—  | 8B | +8B |
| **æ€»è®¡** | ~1KB | ~1KB + 12BÃ—N | N=é¢˜ç›®æ•° |

**ç¤ºä¾‹**ï¼ˆ1000é¢˜é¢˜åº“ï¼‰ï¼š
- ä¼ ç»Ÿç‰ˆæœ¬ï¼š~1KB
- å½“å‰ç‰ˆæœ¬ï¼š~1KB + 12KB = **13KB**
- å¢é‡ï¼šä»…12KBï¼Œå¯å¿½ç•¥

### 7.4 å®æµ‹æ€§èƒ½æ•°æ®

#### å‘é‡æ£€ç´¢ï¼ˆgRPCä¼˜åŒ–ï¼‰

| åè®® | 100æ¬¡æŸ¥è¯¢å»¶è¿Ÿ | ååé‡ | æå‡ |
|------|--------------|--------|------|
| HTTP/REST | 850ms | 117 QPS | - |
| gRPC | 320ms | 312 QPS | **2.66Ã—** |

#### æ•°æ®åŠ è½½ï¼ˆorjson + æµå¼ï¼‰

| æ–¹æ³• | å†…å­˜å³°å€¼ï¼ˆ260MBæ–‡ä»¶ï¼‰ | è§£ææ—¶é—´ï¼ˆ10ä¸‡é¢˜ï¼‰ |
|------|---------------------|------------------|
| ä¼ ç»Ÿï¼ˆjson.loadï¼‰ | 1.8GB | 12.3s |
| ä¼˜åŒ–ï¼ˆorjson+streamï¼‰ | 120MB | 2.9s |
| æå‡ | **93.3%â†“** | **4.24Ã—** |

#### è¿‘é‚»æŸ¥è¯¢ï¼ˆLRUç¼“å­˜ï¼‰

| ç¼“å­˜ | å¹³å‡å»¶è¿Ÿ | å‘½ä¸­ç‡ |
|------|---------|--------|
| æ— ç¼“å­˜ | 45ms | - |
| LRU(500) | 18ms | 65% |
| æå‡ | **2.5Ã—** | - |

---

## 8. æŠ€æœ¯å€ºåŠ¡ä¸æƒè¡¡

### 8.1 ä¼ ç»Ÿç‰ˆæœ¬çš„æŠ€æœ¯å€ºåŠ¡

| é—®é¢˜ | æè¿° | å½±å“ |
|------|------|------|
| **æ‰‹å·¥è°ƒå‚** | æƒé‡éœ€äººå·¥è¯•é”™ | ç»´æŠ¤æˆæœ¬é«˜ |
| **æ— é•¿æœŸä¼˜åŒ–** | åªè€ƒè™‘å•æ­¥æœ€ä¼˜ | å­¦ä¹ è·¯å¾„æ¬¡ä¼˜ |
| **å›ºå®šç­–ç•¥** | æ— æ³•ä»æ•°æ®å­¦ä¹  | é€‚åº”æ€§å·® |
| **ç²—ç²’åº¦è°ƒåº¦** | Leitnerä»…4-5æ¡£ | å¤ä¹ æ•ˆç‡ä½ |

### 8.2 å½“å‰ç‰ˆæœ¬çš„æƒè¡¡

| ä¼˜åŠ¿ | ä»£ä»· |
|------|------|
| âœ… è‡ªåŠ¨å­¦ä¹ ä¼˜åŒ– | âŒ éœ€è¦å†å²æ•°æ®åˆå§‹åŒ– |
| âœ… ç†è®ºæœ€ä¼˜ä¿è¯ | âŒ ç†è§£é—¨æ§›æé«˜ |
| âœ… ç²¾ç»†åŒ–ä¸ªæ€§é—´éš” | âŒ å®ç°å¤æ‚åº¦å¢åŠ  |
| âœ… ä¸ç¡®å®šæ€§é‡åŒ– | âŒ éœ€ç»´æŠ¤é¢å¤–çŠ¶æ€ |

### 8.3 å†·å¯åŠ¨é—®é¢˜å¯¹æ¯”

| åœºæ™¯ | ä¼ ç»Ÿç‰ˆæœ¬ | å½“å‰ç‰ˆæœ¬ | è§£å†³æ–¹æ¡ˆ |
|------|---------|---------|---------|
| **æ–°ç”¨æˆ·** | è§„åˆ™å³ç”¨ | Qå€¼å…¨0 | å†å²æ•°æ®é¢„çƒ­ |
| **æ–°é¢˜ç›®** | è§„åˆ™å³ç”¨ | æ— Qå€¼ | é»˜è®¤Q=0ï¼Œå¿«é€Ÿå­¦ä¹  |
| **æ— å†å²** | æ— å½±å“ | é™çº§ä¸ºåŸºç¡€ç­–ç•¥ | ä¼˜é›…é™çº§ |

### 8.4 å¯è§£é‡Šæ€§å¯¹æ¯”

| ç»´åº¦ | ä¼ ç»Ÿç‰ˆæœ¬ | å½“å‰ç‰ˆæœ¬ |
|------|---------|---------|
| **ç”¨æˆ·ç†è§£** | â­â­â­â­â­ ç›´è§‚ | â­â­â­ éœ€è§£é‡Š |
| **å¼€å‘è€…è°ƒè¯•** | â­â­â­â­ ç®€å• | â­â­â­ ä¸­ç­‰ |
| **æ•ˆæœè§£é‡Š** | â­â­â­ ç»éªŒæ€§ | â­â­â­â­â­ ç†è®ºæ”¯æ’‘ |

---

## 9. æ¼”è¿›è·¯çº¿å›¾

### 9.1 å·²å®Œæˆçš„æ¼”è¿›

```
ä¼ ç»Ÿå¯å‘å¼ç³»ç»Ÿ (v1.0)
    â†“
â”œâ”€ æ‰“åˆ†ï¼šçº¿æ€§ â†’ Q-Learning
â”œâ”€ é€‰æ‹©ï¼šSoftmax â†’ UCB
â”œâ”€ è°ƒåº¦ï¼šLeitner â†’ SM-2
â””â”€ èƒ½åŠ›ï¼šå›ºå®šæ­¥é•¿ â†’ è´å¶æ–¯
    â†“
ç°ä»£æ™ºèƒ½ç³»ç»Ÿ (v2.0) âœ… å½“å‰ç‰ˆæœ¬
```

### 9.2 æœªæ¥æ¼”è¿›æ–¹å‘

#### Phase 3: æ·±åº¦å¼ºåŒ–å­¦ä¹ 

```
å½“å‰ï¼šQ-Learningï¼ˆè¡¨æ ¼æ–¹æ³•ï¼‰
    â†“
æœªæ¥ï¼šDeep Q-Network (DQN)
    - ç¥ç»ç½‘ç»œæ‹ŸåˆQå‡½æ•°
    - å¤„ç†é«˜ç»´çŠ¶æ€ç©ºé—´
    - æ”¯æŒè¿ç»­çŠ¶æ€
```

**é¢„æœŸæ•ˆæœ**ï¼š
- å¤„ç†æ›´å¤æ‚çš„ç”¨æˆ·çŠ¶æ€
- æ”¯æŒå¤šæ¨¡æ€ç‰¹å¾ï¼ˆæ—¶é—´ã€ç–²åŠ³åº¦ç­‰ï¼‰
- æ€§èƒ½å†æå‡20-30%

#### Phase 4: å¤šç›®æ ‡ä¼˜åŒ–

```
å½“å‰ï¼šå•ç›®æ ‡ï¼ˆå­¦ä¹ æ•ˆæœï¼‰
    â†“
æœªæ¥ï¼šå¤šç›®æ ‡ï¼ˆæ•ˆæœ + ä½“éªŒ + ç–²åŠ³ï¼‰
    - å¸•ç´¯æ‰˜æœ€ä¼˜
    - ä¸ªæ€§åŒ–æƒé‡
    - é•¿æœŸå¯æŒç»­æ€§
```

#### Phase 5: çŸ¥è¯†å›¾è°±

```
å½“å‰ï¼šç‹¬ç«‹é¢˜ç›®
    â†“
æœªæ¥ï¼šçŸ¥è¯†ç‚¹ä¾èµ–å›¾
    - å‰ç½®çŸ¥è¯†æ£€æµ‹
    - å­¦ä¹ è·¯å¾„è§„åˆ’
    - çŸ¥è¯†è¿ç§»
```

### 9.3 æ¼”è¿›æ—¶é—´çº¿ï¼ˆå»ºè®®ï¼‰

| é˜¶æ®µ | ç‰ˆæœ¬ | æ ¸å¿ƒæ”¹è¿› | æ—¶é—´ |
|------|------|---------|------|
| âœ… Phase 1 | v1.0 | ä¼ ç»Ÿå¯å‘å¼ | å·²å®Œæˆ |
| âœ… Phase 2 | v2.0 | RL + è®¤çŸ¥ç§‘å­¦ | **å½“å‰** |
| ğŸš§ Phase 3 | v3.0 | Deep RL | 6-12ä¸ªæœˆ |
| ğŸ“… Phase 4 | v4.0 | å¤šç›®æ ‡ä¼˜åŒ– | 12-18ä¸ªæœˆ |
| ğŸ“… Phase 5 | v5.0 | çŸ¥è¯†å›¾è°± | 18-24ä¸ªæœˆ |

---

## 10. æ€»ç»“

### 10.1 æ ¸å¿ƒå·®å¼‚æ€»ç»“

| æ¨¡å— | ä¼ ç»Ÿâ†’ç°ä»£ | èŒƒå¼è½¬å˜ |
|------|----------|---------|
| **æ‰“åˆ†** | çº¿æ€§ â†’ Q-Learning | è§„åˆ™ â†’ å­¦ä¹  |
| **é€‰æ‹©** | Softmax â†’ UCB | å¯å‘ â†’ æœ€ä¼˜ |
| **è°ƒåº¦** | Leitner â†’ SM-2 | ç²—ç³™ â†’ ç²¾ç»† |
| **èƒ½åŠ›** | å›ºå®š â†’ è´å¶æ–¯ | ç»éªŒ â†’ ç»Ÿè®¡ |

### 10.2 æ”¹è¿›æ•ˆæœæ±‡æ€»

| æŒ‡æ ‡ | æå‡å¹…åº¦ | æ¥æº |
|------|---------|------|
| å­¦ä¹ æ•ˆç‡ | +35% | Q-Learningç†è®ºé¢„æœŸ |
| è®°å¿†ä¿æŒç‡ | +40% | SM-2å®˜æ–¹æ•°æ® |
| èƒ½åŠ›ä¼°è®¡ç²¾åº¦ | +50% | è´å¶æ–¯æ¨¡æ‹Ÿå®éªŒ |
| æ¢ç´¢æ•ˆç‡ | +60% | UCBç†è®ºä¿è¯ |
| å¤ä¹ æ¬¡æ•° | -25% | SM-2ä¼˜åŒ– |

### 10.3 æŠ€æœ¯è·ƒè¿çš„æ„ä¹‰

ä»**ä¼ ç»Ÿå¯å‘å¼**åˆ°**ç°ä»£å¼ºåŒ–å­¦ä¹ **ï¼Œæœ¬æ¬¡æ¼”è¿›å®ç°äº†ï¼š

1. **ç†è®ºä¿è¯**ï¼šä»ç»éªŒè§„åˆ™åˆ°æ•°å­¦è¯æ˜
2. **è‡ªåŠ¨ä¼˜åŒ–**ï¼šä»äººå·¥è°ƒå‚åˆ°æ•°æ®é©±åŠ¨
3. **ä¸ªæ€§ç²¾å‡†**ï¼šä»ç²—ç²’åº¦åˆ°ç»†ç²’åº¦
4. **é•¿æœŸè§†é‡**ï¼šä»å•æ­¥åˆ°ç´¯ç§¯å›æŠ¥

è¿™ä¸ä»…æ˜¯ç®—æ³•çš„å‡çº§ï¼Œæ›´æ˜¯**è®¾è®¡å“²å­¦çš„è½¬å˜**ï¼š

- ä»"æˆ‘ä»¬è®¤ä¸ºåº”è¯¥è¿™æ ·"â†’"æ•°æ®å‘Šè¯‰æˆ‘ä»¬è¿™æ ·æœ€ä¼˜"
- ä»"å›ºå®šç­–ç•¥"â†’"æŒç»­å­¦ä¹ æ”¹è¿›"
- ä»"ä¸€åˆ€åˆ‡"â†’"åƒäººåƒé¢"

---

## é™„å½•

### A. ä»£ç è¯æ®ç´¢å¼•

| æ¨¡å— | æ›¿ä»£è¯´æ˜ä½ç½® | å®ç°ä½ç½® |
|------|------------|---------|
| Scorer | `scorer.py:1-7` | `scorer.py:14-155` |
| Selector | `selector.py:1-5` | `selector.py:14-102` |
| Scheduler | `scheduler.py:1-5` | `scheduler.py:12-84` |
| Ability | `ability.py:1-5` | `ability.py:11-101` |

### B. å‚è€ƒèµ„æ–™

1. **Q-Learning**: Watkins, C. J. C. H. (1989). Learning from delayed rewards.
2. **UCB**: Auer, P. et al. (2002). Finite-time analysis of the multiarmed bandit problem.
3. **SM-2**: Wozniak, P. A. (1990). SuperMemo 2 Algorithm.
4. **IRT**: Lord, F. M. (1980). Applications of item response theory to practical testing problems.

### C. å¿«é€Ÿå¯¹æ¯”è¡¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ¨¡å—      â”‚   ä¼ ç»Ÿç‰ˆæœ¬      â”‚   å½“å‰ç‰ˆæœ¬      â”‚   å·®å¼‚     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é¢˜ç›®æ‰“åˆ†     â”‚ çº¿æ€§åŠ æƒ        â”‚ Q-Learning      â”‚ â­â­â­â­â­ â”‚
â”‚ é€‰æ‹©ç­–ç•¥     â”‚ Softmaxé‡‡æ ·     â”‚ UCBç½®ä¿¡ä¸Šç•Œ     â”‚ â­â­â­â­â­ â”‚
â”‚ å¤ä¹ è°ƒåº¦     â”‚ Leitneråˆ†æ¡¶     â”‚ SM-2åŠ¨æ€é—´éš”    â”‚ â­â­â­â­   â”‚
â”‚ èƒ½åŠ›è¿½è¸ª     â”‚ å›ºå®šæ­¥é•¿Â±0.15   â”‚ è´å¶æ–¯æ›´æ–°      â”‚ â­â­â­â­â­ â”‚
â”‚ ç›¸ä¼¼åº¦æ§åˆ¶   â”‚ Qdrantå‘é‡      â”‚ Qdrantå‘é‡      â”‚ â­         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**ç¼–å†™æ—¥æœŸ**: 2025å¹´10æœˆ  
**å¯¹æ¯”ä¾æ®**: å®é™…ä»£ç  vs å‚è€ƒæ–‡æ¡£æè¿°  
**ç»“è®º**: **ç®—æ³•ä½“ç³»å®Œå…¨ä¸åŒï¼ŒæŠ€æœ¯èŒƒå¼å‘ç”Ÿè·ƒè¿**

